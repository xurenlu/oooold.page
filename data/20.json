{"title":"how2bts","zzzContent":"只需要三步:\n\n1.\t想个名字:\n\t给你的这个bts想一个名字,比如P4p_more_auctions,比如BtsFor60AuctionsPerPage...\n\t\n2.\t写代码\t\n\tA:\t在BtsInfoHelper里给enum BtsFeatureNames加上你的这个bts的名字;\n\n\tB: 再写一行代码注明是哪一层做的bts:\n\t\n\tC: 再写一行注意这个bts对应配置中心的配置是哪个变量;\n\n<del>如果是在算法层做的bts,就在BtsInfoHelper.algBtsFeatures这个成员变量里加上;</del> **注:现在默认都是在algBtsFeature里做的bts;**\n\n如果是要在feBts或是bucketCell或是btsServer层做bts,需要分别把名字加到feBtsFeatures或是bucketCellBtsFeatures/btsServerBtsFeatures里去,例如:\n\n例如,p4pXmatch是指的在输出给p4p的时候,在p4pconfig里输出xmatch:1;(默认情况下是输出0,在bucketCell是\n25,26,27,28的时候输出1,表示让p4p从xmatch.simba.taobao.com 接口取数据;)\n\n\n我们需要这么修改BtsInfoHelper:\n\n\n```java\n\n\t//BtsInfoHelper.java\n\t....\n\tstatic {\n\t\n\t\t//设置是在哪一层做的bts;默认都是在Algbts层做的;\n\t\tbtsFeatures.put(BtsFeatureNames.p4pXmatch,new int[]{25,26,27,28});\n\t\t\t\t\n\t\t//设置默认值\n       btsFeatures.put(BtsFeatureNames.p4pXmatch,new int[]{25,26,27,28});\n        \n\t    //设置在配置中心对应的变量名字;\n    \tconfigCenterNames.put(BtsFeatureNames.p4pXmatch,\"params.p4p_xmatch_bts\");\n\t}\n```\t\t\t\t\n\n\n3. 在diamond里推送配置.参见:[配置中心指北](diamond_guid)\n\n\n","postDate":"2018-01-01 02:03:35","postId":20,"type":"post","status":"publish","imported":false,"file":"how2bts.md"}