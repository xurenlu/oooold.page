{"title":"diamond","zzzContent":"##什么是diamond\nDiamond就是Java版的全淘系公用的配置中心.速度快,超级快,在本地有cache,推送新的值之后迅速生效;\n\n[diamond的文档](http://baike.corp.taobao.com/index.php/Diamond#.E5.90.84.E7.8E.AF.E5.A2.83.E7.9A.84.E5.9C.B0.E5.9D.80.E6.9C.8D.E5.8A.A1.E5.99.A8.E9.85.8D.E7.BD.AE)\n\n[diamond的推送界面_日常环境](http://ops.jm.taobao.net/diamond-ops/configs/list.html?pageNo=1&pageSize=15&serverId=Diamond&dataId=&group=SearchWebApp#)\n\n[diamond的推送界面_预发环境](http://ops.jm.taobao.org:9999/diamond-ops/configs/list.html?serverId=DiamondPre) \n### diamond的三套环境\n\n版本范围 [3.5.1, )，使用域名 jmenv.tbsite.net，绑定地址不变。\n\n** 注意的是,日常和线上环境,不需要配置域名 **\n\n\t**日常环境  10.232.16.8  diamondserver.tbsite.net DNS实现，不需要绑定\n\t**线上环境  172.23.100.121  diamondserver.tbsite.net DNS实现，不需要绑定\n\t**预发环境  172.23.226.84 diamondserver.tbsite.net 需要本机绑定（美国绑定172.20.156.6）\n\n\n### rolex 使用 diamond 三步曲\n\n0. 在diamond的推送界面里,推送你需要的数据;\n\t比如,我已经推送了这么几条:\n\tdataId:com.taobao.search.params.p4p_xmatch_bts\n\tgroup:SearchWebApp\n\tvalue:25,26,27,28\n\t\n\t请按照统一的规范来,group 用SearchWebApp,dataId 用com.taobao.search.这个前缀.\n\t\n1. 在你的类里注入PersistentConfigClient:\n\n\t\t    @Autowired\n\t\t    PersistentConfigClient persistentConfigClient;\t\n2. 调用它的getConfig方法:\n\n\t\tString ConfigInConfigCenter = persistentConfigClient.getConfig(\"com.taobao.search.params.p4p_xmatch_bts\");\n\t\t....解析ConfigInConfigCenter的值.继续你的处理.\n\t\t\n\n\n### Questions\n\n1. Q:明明在推送界面还有一个Group参数,上哪儿去啦?\n\n\t我写死啦,固定为SearchWebApp,参见:__tsf-component.xml__:\n\t\n\t\t    <beans:bean name=\"persistentConfigClient\" class=\"com.taobao.search.tsf.client.PersistentConfigClient\"\n                p:cacheClient-ref=\"localCacheClient\"\n                p:group=\"SearchWebApp\"\n            />\n\n\n\n","postDate":"2018-01-01 02:03:35","postId":13,"type":"post","status":"publish","imported":false,"file":"diamond.md"}